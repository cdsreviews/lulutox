<script>
        // 解码函数，处理双重编码等问题
        function safeDecode(value) {
            try {
                const once = decodeURIComponent(value);
                const twice = decodeURIComponent(once);
                return twice;
            } catch (e) {
                try {
                    return decodeURIComponent(value);
                } catch (err) {
                    return value;
                }
            }
        }
    
        // 获取 URL 参数并尝试多层解码
        function getURLParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            const rawValue = urlParams.get(name);
            return rawValue ? safeDecode(rawValue) : null;
        }
    
        // 获取并处理 ScCid 参数
        const scCid = getURLParameter('ScCid');  // Snapchat 参数
    
        // 保存 ScCid
        if (scCid) {
            localStorage.setItem('sc_cid', scCid);
            console.log('Snapchat CID:', scCid);
        }
    </script>

<script type="text/javascript">
    // 从localStorage获取ScCid
    const scCid = localStorage.getItem('sc_cid');

    // 解码函数，防止编码导致的乱码
    function safeDecode(value) {
        try {
            const once = decodeURIComponent(value);
            const twice = decodeURIComponent(once);
            return twice;
        } catch (e) {
            try {
                return decodeURIComponent(value);
            } catch (err) {
                return value;
            }
        }
    }

    // 检查scCid是否存在，并解码
    if (scCid) {
        const decodedScCid = safeDecode(scCid);

        // 动态生成URL，插入scCid作为s5的值
        const url = `https://nmttrack.com/?a=146518&o=168172&c=0&co=194328&mt=24&s1=snapchat&s5=${encodeURIComponent(decodedScCid)}`;

        // 重定向到构造的URL
        window.location.href = url;
    } else {
        // 如果scCid不存在，使用默认的URL
        const defaultUrl = 'https://nmttrack.com/?a=146518&o=168172&c=0&co=194328&mt=24&s1=snapchat'; // 替换为你想要的默认URL
        window.location.href = defaultUrl;
    }
</script>
